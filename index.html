<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrozPray - –í—Ä–µ–º—è –Ω–∞–º–∞–∑–∞ –≤ –ì—Ä–æ–∑–Ω–æ–º</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Amiri:wght@700&family=Open+Sans:wght@400;600&display=swap">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/index.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <img src="https://via.placeholder.com/50x50/2E8B57/FFFFFF?text=GP" alt="–õ–æ–≥–æ—Ç–∏–ø" class="logo-img">
                <h1>GrozPray</h1>
            </div>
            <p class="slogan">–í–∞—à –ø–æ–º–æ—â–Ω–∏–∫ –≤ –ø–æ–∫–ª–æ–Ω–µ–Ω–∏–∏</p>
        </header>
        
        <nav>
            <a href="index.html" class="active">üïã –ù–∞–º–∞–∑</a>
            <a href="quran.html">üìñ –ö–æ—Ä–∞–Ω</a>
            <a href="dhikr.html">üìø –ó–∏–∫—Ä—ã</a>
        </nav>

        <main>
            <section class="card">
                <h2>‚è≥ –í—Ä–µ–º—è –Ω–∞–º–∞–∑–∞ - –ì—Ä–æ–∑–Ω—ã–π</h2>
                <div class="prayer-grid" id="prayer-times-container">
                    <div class="prayer-item" id="fajr-container">
                        <span class="prayer-name">–§–∞–¥–∂—Ä</span>
                        <span class="prayer-time" id="fajr">--:--</span>
                    </div>
                    <div class="prayer-item" id="dhuhr-container">
                        <span class="prayer-name">–ó—É—Ö—Ä</span>
                        <span class="prayer-time" id="dhuhr">--:--</span>
                    </div>
                    <div class="prayer-item" id="asr-container">
                        <span class="prayer-name">–ê—Å—Ä</span>
                        <span class="prayer-time" id="asr">--:--</span>
                    </div>
                    <div class="prayer-item" id="maghrib-container">
                        <span class="prayer-name">–ú–∞–≥—Ä–∏–±</span>
                        <span class="prayer-time" id="maghrib">--:--</span>
                    </div>
                    <div class="prayer-item" id="isha-container">
                        <span class="prayer-name">–ò—à–∞</span>
                        <span class="prayer-time" id="isha">--:--</span>
                    </div>
                </div>
            </section>

            <div id="notification" class="notification-hidden">
                <p>–í—Ä–µ–º—è –Ω–∞–º–∞–∑–∞ <span id="current-prayer"></span>!</p>
                <button onclick="hideNotification()">‚úï</button>
            </div>
        </main>

        <footer>
            <p>¬© 2024 GrozPray | –°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –º—É—Å—É–ª—å–º–∞–Ω</p>
        </footer>
    </div>

    <script>
        // –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞–º–∞–∑–∞
        fetch('https://api.aladhan.com/v1/timingsByCity?city=Grozny&country=Russia&method=2')
            .then(response => response.json())
            .then(data => {
                const timings = data.data.timings;
                document.getElementById('fajr').textContent = timings.Fajr;
                document.getElementById('dhuhr').textContent = timings.Dhuhr;
                document.getElementById('asr').textContent = timings.Asr;
                document.getElementById('maghrib').textContent = timings.Maghrib;
                document.getElementById('isha').textContent = timings.Isha;
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –≤—Ä–µ–º–µ–Ω–∏
                startPrayerTimeChecker();
            });

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞–º–∞–∑–∞
        function startPrayerTimeChecker() {
            setInterval(() => {
                const now = new Date();
                const currentTime = formatTime(now.getHours(), now.getMinutes());
                
                const prayers = {
                    'fajr': document.getElementById('fajr').textContent,
                    'dhuhr': document.getElementById('dhuhr').textContent,
                    'asr': document.getElementById('asr').textContent,
                    'maghrib': document.getElementById('maghrib').textContent,
                    'isha': document.getElementById('isha').textContent
                };

                for (const [prayer, time] of Object.entries(prayers)) {
                    if (time === currentTime) {
                        showPrayerNotification(prayer);
                    }
                }
            }, 30000); // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
        }

        function formatTime(hours, minutes) {
            return `${hours}:${minutes < 10 ? '0' + minutes : minutes}`;
        }

        function showPrayerNotification(prayer) {
            const prayerNames = {
                'fajr': '–§–∞–¥–∂—Ä',
                'dhuhr': '–ó—É—Ö—Ä',
                'asr': '–ê—Å—Ä',
                'maghrib': '–ú–∞–≥—Ä–∏–±',
                'isha': '–ò—à–∞'
            };

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–∏–∑—É–∞–ª—å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            document.getElementById('current-prayer').textContent = prayerNames[prayer];
            document.getElementById('notification').className = 'notification-show';
            
            // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π –Ω–∞–º–∞–∑
            document.getElementById(`${prayer}-container`).classList.add('prayer-active');
            setTimeout(() => {
                document.getElementById(`${prayer}-container`).classList.remove('prayer-active');
            }, 600000); // 10 –º–∏–Ω—É—Ç –ø–æ–¥—Å–≤–µ—Ç–∫–∏

            // –ë—Ä–∞—É–∑–µ—Ä–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–µ—Å–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ)
            if (Notification.permission === 'granted') {
                new Notification(`–í—Ä–µ–º—è –Ω–∞–º–∞–∑–∞ ${prayerNames[prayer]}!`, {
                    body: '–ù–∞—Å—Ç—É–ø–∏–ª–æ –≤—Ä–µ–º—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ –Ω–∞–º–∞–∑–∞',
                    icon: 'https://via.placeholder.com/64/2E8B57/FFFFFF?text=üïå'
                });
            }
        }

        function hideNotification() {
            document.getElementById('notification').className = 'notification-hidden';
        }

        // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        if (Notification.permission !== 'denied') {
            Notification.requestPermission();
        }
    </script>
</body>
</html>

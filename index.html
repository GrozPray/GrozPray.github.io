<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrozPray - –í—Ä–µ–º—è –Ω–∞–º–∞–∑–∞ –≤ –ì—Ä–æ–∑–Ω–æ–º</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Amiri:wght@700&family=Open+Sans:wght@400;600&display=swap">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/index.css">
</head>
<body>
    <script>
// –ó–∞–ø—Ä–æ—Å–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
Notification.requestPermission().then(permission => {
  if (permission !== "granted") {
    console.log("–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º");
    return;
  }

  // –ü–æ–ª—É—á–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞–º–∞–∑–∞ –¥–ª—è –ì—Ä–æ–∑–Ω–æ–≥–æ
  fetch("https://api.aladhan.com/v1/timingsByCity?city=Grozny&country=Russia&method=2")
    .then(response => response.json())
    .then(data => {
      const fajrTime = data.data.timings.Fajr; // –Ω–∞–ø—Ä–∏–º–µ—Ä "03:15"
      console.log("–í—Ä–µ–º—è –§–∞–¥–∂—Ä:", fajrTime);

      // –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è
      const now = new Date();
      const todayFajr = new Date(now);
      const [hours, minutes] = fajrTime.split(":");
      todayFajr.setHours(parseInt(hours, 10));
      todayFajr.setMinutes(parseInt(minutes, 10));
      todayFajr.setSeconds(0);

      // –ï—Å–ª–∏ –≤—Ä–µ–º—è –§–∞–¥–∂—Ä —É–∂–µ –ø—Ä–æ—à–ª–æ —Å–µ–≥–æ–¥–Ω—è, –Ω–µ —É–≤–µ–¥–æ–º–ª—è–µ–º
      if (todayFajr < now) {
        console.log("–í—Ä–µ–º—è –§–∞–¥–∂—Ä —Å–µ–≥–æ–¥–Ω—è —É–∂–µ –ø—Ä–æ—à–ª–æ");
        return;
      }

      // –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –¥–æ –≤—Ä–µ–º–µ–Ω–∏ –§–∞–¥–∂—Ä
      const delay = todayFajr - now;
      console.log(`–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ ${Math.round(delay / 60000)} –º–∏–Ω—É—Ç`);

      setTimeout(() => {
        new Notification("–í—Ä–µ–º—è –Ω–∞–º–∞–∑–∞!", {
          body: `–°–µ–π—á–∞—Å –≤—Ä–µ–º—è –§–∞–¥–∂—Ä: ${fajrTime}. –ü–æ—Ä–∞ —Å–æ–≤–µ—Ä—à–∏—Ç—å –Ω–∞–º–∞–∑ üôè`,
          icon: "images/logo.png" // –ø—É—Ç—å –∫ —Ç–≤–æ–µ–º—É –ª–æ–≥–æ—Ç–∏–ø—É
        });
      }, delay);

    })
    .catch(error => {
      console.error("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞–º–∞–∑–∞:", error);
    });
});
</script>

    <div class="container">
        <header>
                <h1>GrozPray</h1>
            </div>
            <p class="slogan">–í–∞—à –ø–æ–º–æ—â–Ω–∏–∫ –≤ –ø–æ–∫–ª–æ–Ω–µ–Ω–∏–∏</p>
        </header>
        
        <nav>
            <a href="index.html" class="active">üïã –ù–∞–º–∞–∑</a>
            <a href="quran.html">üìñ –ö–æ—Ä–∞–Ω</a>
            <a href="dhikr.html">üìø –ó–∏–∫—Ä—ã</a>
        </nav>

        <main>
            <section class="card">
                <h2>‚è≥ –í—Ä–µ–º—è –Ω–∞–º–∞–∑–∞ - –ì—Ä–æ–∑–Ω—ã–π</h2>
                <div class="prayer-grid">
                    <div class="prayer-item" id="fajr-card">
                        <span class="prayer-name">–§–∞–¥–∂—Ä</span>
                        <span class="prayer-time" id="fajr">--:--</span>
                    </div>
                    <div class="prayer-item" id="dhuhr-card">
                        <span class="prayer-name">–ó—É—Ö—Ä</span>
                        <span class="prayer-time" id="dhuhr">--:--</span>
                    </div>
                    <div class="prayer-item" id="asr-card">
                        <span class="prayer-name">–ê—Å—Ä</span>
                        <span class="prayer-time" id="asr">--:--</span>
                    </div>
                    <div class="prayer-item" id="maghrib-card">
                        <span class="prayer-name">–ú–∞–≥—Ä–∏–±</span>
                        <span class="prayer-time" id="maghrib">--:--</span>
                    </div>
                    <div class="prayer-item" id="isha-card">
                        <span class="prayer-name">–ò—à–∞</span>
                        <span class="prayer-time" id="isha">--:--</span>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>¬© 2024 GrozPray | –°–¥–µ–ª–∞–Ω–æ –¥–ª—è –º—É—Å—É–ª—å–º–∞–Ω</p>
        </footer>
    </div>

    <script>
        // –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞–º–∞–∑–∞
        fetch('https://api.aladhan.com/v1/timingsByCity?city=Grozny&country=Russia&method=2')
            .then(response => response.json())
            .then(data => {
                const timings = data.data.timings;
                document.getElementById('fajr').textContent = timings.Fajr;
                document.getElementById('dhuhr').textContent = timings.Dhuhr;
                document.getElementById('asr').textContent = timings.Asr;
                document.getElementById('maghrib').textContent = timings.Maghrib;
                document.getElementById('isha').textContent = timings.Isha;
                
                checkPrayerTime(); // –ü–µ—Ä–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
                setInterval(checkPrayerTime, 30000); // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫
            });

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞–º–∞–∑–∞
        function checkPrayerTime() {
            const now = new Date();
            const currentTime = formatTime(now.getHours(), now.getMinutes());
            
            const prayers = {
                'fajr': document.getElementById('fajr').textContent,
                'dhuhr': document.getElementById('dhuhr').textContent,
                'asr': document.getElementById('asr').textContent,
                'maghrib': document.getElementById('maghrib').textContent,
                'isha': document.getElementById('isha').textContent
            };

            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Å–µ –ø–æ–¥—Å–≤–µ—Ç–∫–∏
            document.querySelectorAll('.prayer-item').forEach(item => {
                item.classList.remove('current-prayer');
            });

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–π –Ω–∞–º–∞–∑
            for (const [prayer, time] of Object.entries(prayers)) {
                if (time === currentTime) {
                    showPrayerAlert(prayer);
                    document.getElementById(`${prayer}-card`).classList.add('current-prayer');
                }
            }
        }

        function formatTime(hours, minutes) {
            return `${hours}:${minutes < 10 ? '0' + minutes : minutes}`;
        }

        function showPrayerAlert(prayer) {
            const prayerNames = {
                'fajr': '–§–∞–¥–∂—Ä',
                'dhuhr': '–ó—É—Ö—Ä',
                'asr': '–ê—Å—Ä',
                'maghrib': '–ú–∞–≥—Ä–∏–±',
                'isha': '–ò—à–∞'
            };
            
            // –ü—Ä–æ—Å—Ç–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ (–Ω–µ –º–µ—à–∞–µ—Ç –¥–∏–∑–∞–π–Ω—É)
            console.log(`–í—Ä–µ–º—è –Ω–∞–º–∞–∑–∞ ${prayerNames[prayer]}!`);
            
            // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∑–≤—É–∫ (–ø–æ –∂–µ–ª–∞–Ω–∏—é)
            // new Audio('notification.mp3').play();
        }
    </script>
</body>
</html>

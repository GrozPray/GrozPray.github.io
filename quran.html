<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrozPray - –ü–æ–ª–Ω—ã–π –ö–æ—Ä–∞–Ω</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2E8B57;
            --secondary: #D4AF37;
            --dark: #1A3A2F;
            --light: #F5F5F5;
            --text: #333;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            background-color: var(--light);
            color: var(--text);
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 20px 0;
            background: linear-gradient(135deg, var(--primary), var(--dark));
            color: white;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        h1 {
            margin: 0;
            font-size: 2em;
        }

        nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        nav a {
            color: var(--dark);
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 50px;
            background: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: all 0.3s;
            font-size: 1.1em;
        }

        nav a.active, nav a:hover {
            background: var(--primary);
            color: white;
        }

        .card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –ö–æ—Ä–∞–Ω–∞ */
        .quran-container {
            display: flex;
            gap: 20px;
        }

        .suras-sidebar {
            width: 250px;
            background: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            height: 80vh;
            overflow-y: auto;
        }

        .suras-list {
            max-height: 100%;
            overflow-y: auto;
        }

        .sura-sidebar-item {
            padding: 10px;
            margin-bottom: 5px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .sura-sidebar-item:hover {
            background-color: rgba(46, 139, 87, 0.1);
        }

        .sura-sidebar-item.active {
            background-color: rgba(46, 139, 87, 0.2);
            font-weight: 600;
        }

        .quran-content {
            flex: 1;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            height: 80vh;
            overflow-y: auto;
        }

        .sura-header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .sura-title {
            color: var(--primary);
            margin-bottom: 5px;
        }

        .sura-name-arabic {
            font-family: 'Amiri', serif;
            font-size: 2em;
            color: var(--dark);
        }

        .aya-container {
            margin-bottom: 25px;
            direction: rtl;
        }

        .aya {
            font-family: 'Amiri', serif;
            font-size: 1.8em;
            line-height: 1.8;
            text-align: right;
            margin-bottom: 10px;
        }

        .aya-number {
            display: inline-block;
            width: 30px;
            height: 30px;
            background-color: var(--primary);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            font-size: 14px;
            margin-left: 10px;
            font-family: 'Open Sans', sans-serif;
        }

        .translation {
            font-family: 'Open Sans', sans-serif;
            font-size: 1em;
            line-height: 1.6;
            color: var(--text);
            margin-top: 10px;
            direction: ltr;
            text-align: left;
            padding-left: 40px;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            color: #666;
        }

        @media (max-width: 768px) {
            .quran-container {
                flex-direction: column;
            }

            .suras-sidebar {
                width: 100%;
                height: auto;
                max-height: 200px;
            }

            .quran-content {
                height: auto;
            }

            .aya {
                font-size: 1.5em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <h1>GrozPray</h1>
            </div>
        </header>
        
        <nav>
            <a href="index.html">üïã –ù–∞–º–∞–∑</a>
            <a href="quran.html" class="active">üìñ –ö–æ—Ä–∞–Ω</a>
            <a href="dhikr.html">üìø –ó–∏–∫—Ä—ã</a>
        </nav>

        <div class="card">
            <div class="quran-container">
                <div class="suras-sidebar">
                    <h3>–°—É—Ä—ã –ö–æ—Ä–∞–Ω–∞</h3>
                    <div class="suras-list" id="suras-list">
                        <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —Å—É—Ä...</div>
                    </div>
                </div>

                <div class="quran-content">
                    <div id="quran-display">
                        <div class="loading">–í—ã–±–µ—Ä–∏—Ç–µ —Å—É—Ä—É –¥–ª—è —á—Ç–µ–Ω–∏—è</div>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>¬© 2024 GrozPray. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </footer>
    </div>

    <script>
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫—ç—à –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        const quranCache = {
            suras: null,
            arabicText: {},
            translations: {}
        };

        // –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        async function loadSuraList() {
            try {
                const response = await fetch('https://api.alquran.cloud/v1/surah');
                const data = await response.json();
                quranCache.suras = data.data;
                renderSuraList();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ø–∏—Å–∫–∞ —Å—É—Ä:', error);
                document.getElementById('suras-list').innerHTML = 
                    '<div class="error">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.</div>';
            }
        }

        function renderSuraList() {
            const suraListElement = document.getElementById('suras-list');
            suraListElement.innerHTML = '';
            
            quranCache.suras.forEach(sura => {
                const suraItem = document.createElement('div');
                suraItem.className = 'sura-sidebar-item';
                suraItem.innerHTML = `
                    <strong>${sura.number}.</strong> ${sura.englishName} (${sura.name})
                `;
                suraItem.dataset.number = sura.number;
                
                suraItem.addEventListener('click', () => {
                    // –£–¥–∞–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
                    document.querySelectorAll('.sura-sidebar-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ —Ç–µ–∫—É—â–µ–º—É
                    suraItem.classList.add('active');
                    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—É—Ä—É
                    loadSurah(sura.number);
                });
                
                suraListElement.appendChild(suraItem);
            });
        }

        async function loadSurah(surahNumber) {
            const quranDisplay = document.getElementById('quran-display');
            quranDisplay.innerHTML = '<div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Å—É—Ä—ã...</div>';
            
            try {
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –∞—Ä–∞–±—Å–∫–∏–π —Ç–µ–∫—Å—Ç –∏ –ø–µ—Ä–µ–≤–æ–¥ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
                const [arabicData, translationData] = await Promise.all([
                    getArabicText(surahNumber),
                    getTranslation(surahNumber)
                ]);
                
                renderSurah(arabicData, translationData);
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—É—Ä—ã:', error);
                quranDisplay.innerHTML = `
                    <div class="error">
                        –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.
                        <button onclick="loadSurah(${surahNumber})">‚ü≥ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
                    </div>
                `;
            }
        }

        async function getArabicText(surahNumber) {
            if (!quranCache.arabicText[surahNumber]) {
                const response = await fetch(`https://api.alquran.cloud/v1/surah/${surahNumber}/ar.alafasy`);
                const data = await response.json();
                quranCache.arabicText[surahNumber] = data.data;
            }
            return quranCache.arabicText[surahNumber];
        }

        async function getTranslation(surahNumber) {
            if (!quranCache.translations[surahNumber]) {
                const response = await fetch(`https://api.alquran.cloud/v1/surah/${surahNumber}/ru.kuliev`);
                const data = await response.json();
                quranCache.translations[surahNumber] = data.data;
            }
            return quranCache.translations[surahNumber];
        }

        function renderSurah(arabicData, translationData) {
            const quranDisplay = document.getElementById('quran-display');
            const sura = arabicData;
            const translation = translationData;
            
            let contentHTML = `
                <div class="sura-header">
                    <h2 class="sura-title">${sura.englishName} (${sura.name})</h2>
                    <div class="sura-name-arabic">${sura.englishNameTranslation}</div>
                    <div>${sura.revelationType} ‚Ä¢ ${sura.numberOfAyahs} –∞—è—Ç–æ–≤</div>
                </div>
            `;
            
            sura.ayahs.forEach((aya, index) => {
                contentHTML += `
                    <div class="aya-container">
                        <div class="aya">
                            ${aya.text} <span class="aya-number">${aya.numberInSurah}</span>
                        </div>
                        <div class="translation">
                            ${translation.ayahs[index].text}
                        </div>
                    </div>
                `;
            });
            
            quranDisplay.innerHTML = contentHTML;
            
            // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ –Ω–∞—á–∞–ª—É —Å—É—Ä—ã
            document.querySelector('.quran-content').scrollTo(0, 0);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', loadSuraList);
    </script>
</body>
</html>

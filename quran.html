<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrozPray - –ö–æ—Ä–∞–Ω</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/quran.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <img src="https://via.placeholder.com/50x50/2E8B57/FFFFFF?text=GP" alt="–õ–æ–≥–æ" class="logo-img">
                <h1>GrozPray</h1>
            </div>
            <p class="slogan">–ß—Ç–µ–Ω–∏–µ –ö–æ—Ä–∞–Ω–∞</p>
        </header>
        
        <nav>
            <a href="index.html">üïã –ù–∞–º–∞–∑</a>
            <a href="quran.html" class="active">üìñ –ö–æ—Ä–∞–Ω</a>
            <a href="dhikr.html">üìø –ó–∏–∫—Ä—ã</a>
        </nav>

        <main>
            <section class="card">
                <div class="search-box">
                    <input type="text" id="search-input" placeholder="–ù–∞–π—Ç–∏ —Å—É—Ä—É..." oninput="searchSura()">
                </div>

                <div class="sura-list" id="sura-list">
                    <!-- –°—É—Ä–´ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å -->
                    <div class="loader">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —Å—É—Ä...</div>
                </div>
            </section>
        </main>

        <footer>
            <p>¬© 2024 GrozPray</p>
        </footer>
    </div>

    <script>
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —Å—É—Ä
        fetch('https://api.quran.com/api/v4/chapters?language=ru')
            .then(response => response.json())
            .then(data => {
                let html = '';
                data.chapters.forEach(sura => {
                    html += `
                        <div class="sura-item" data-name="${sura.name_simple.toLowerCase()}">
                            <div class="sura-header" onclick="loadSura(${sura.id})">
                                <span class="sura-number">${sura.id}.</span>
                                <span class="sura-name-arabic">${sura.name_arabic}</span>
                                <span class="sura-name">${sura.name_simple}</span>
                                <span class="sura-ayat">${sura.verses_count} –∞—è—Ç–æ–≤</span>
                            </div>
                            <div class="sura-content" id="sura-${sura.id}"></div>
                        </div>
                    `;
                });
                document.getElementById('sura-list').innerHTML = html;
            });

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–∫—Å—Ç–∞ —Å—É—Ä—ã
        function loadSura(suraId) {
            const suraContent = document.getElementById(`sura-${suraId}`);
            
            if (suraContent.innerHTML === '') {
                suraContent.innerHTML = '<div class="loader">–ó–∞–≥—Ä—É–∑–∫–∞...</div>';
                
                fetch(`https://api.quran.com/api/v4/verses/by_chapter/${suraId}?language=ru&words=false`)
                    .then(response => response.json())
                    .then(data => {
                        let versesHtml = '';
                        data.verses.forEach(verse => {
                            versesHtml += `
                                <div class="ayah">
                                    <span class="ayah-number">${verse.verse_number}.</span>
                                    <p class="ayah-text" dir="rtl" lang="ar">${verse.text_uthmani}</p>
                                    <p class="translation">${verse.translations[0].text}</p>
                                </div>
                            `;
                        });
                        suraContent.innerHTML = versesHtml;
                    });
            } else {
                suraContent.innerHTML = '';
            }
        }

        // –ü–æ–∏—Å–∫ —Å—É—Ä
        function searchSura() {
            const input = document.getElementById('search-input').value.toLowerCase();
            const suraItems = document.querySelectorAll('.sura-item');
            
            suraItems.forEach(item => {
                const suraName = item.getAttribute('data-name');
                item.style.display = suraName.includes(input) ? 'block' : 'none';
            });
        }
    </script>
</body>
</html>

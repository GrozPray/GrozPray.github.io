<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrozPray - –ù–∞—Å—Ç—Ä–æ–π–∫–∏</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Amiri:wght@700&family=Open+Sans:wght@400;600&display=swap">
    <link rel="stylesheet" href="styles/main.css">
    <style>
        .settings-item {
            margin: 15px 0;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 8px;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #2c6e49;
        }
        input:checked + .slider:before {
            transform: translateX(26px);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>GrozPray</h1>
            <p class="slogan">–í–∞—à –ø–æ–º–æ—â–Ω–∏–∫ –≤ –ø–æ–∫–ª–æ–Ω–µ–Ω–∏–∏</p>
        </header>
        
        <nav>
            <a href="index.html">üïã –ù–∞–º–∞–∑</a>
            <a href="quran.html">üìñ –ö–æ—Ä–∞–Ω</a>
            <a href="dhikr.html">üìø –ó–∏–∫—Ä—ã</a>
            <a href="settings.html" class="active">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
        </nav>

        <main class="main-content" id="main-content">
            <section class="card">
                <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h2>
                
                <div class="settings-item">
                    <h3>–¢–µ–º–Ω—ã–π —Ä–µ–∂–∏–º</h3>
                    <label class="switch">
                        <input type="checkbox" id="dark-mode-toggle">
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="settings-item">
                    <h3>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–∞–º–∞–∑–µ</h3>
                    <label class="switch">
                        <input type="checkbox" id="notifications-toggle">
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="settings-item">
                    <h3>–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∞—É–¥–∏–æ</h3>
                    <label class="switch">
                        <input type="checkbox" id="audio-toggle">
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="settings-item">
                    <h3>–°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ —Å—á–µ—Ç—á–∏–∫–∏ –∑–∏–∫—Ä–æ–≤</h3>
                    <button id="reset-counters" class="reset-btn">–°–±—Ä–æ—Å–∏—Ç—å</button>
                </div>
            </section>
        </main>

        <footer>
            <p>¬© 2024 GrozPray | –°–¥–µ–ª–∞–Ω–æ –¥–ª—è –º—É—Å—É–ª—å–º–∞–Ω</p>
        </footer>
    </div>

   <script>
    // –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
    document.addEventListener('DOMContentLoaded', () => {
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–π
        document.getElementById('dark-mode-toggle').checked = 
            localStorage.getItem('darkMode') === 'true';
        document.getElementById('notifications-toggle').checked = 
            localStorage.getItem('notificationsEnabled') === 'true';
        document.getElementById('audio-toggle').checked = 
            localStorage.getItem('autoAudio') === 'true';

        // –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
        document.getElementById('main-content').classList.add('loaded');
    });

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
    document.getElementById('dark-mode-toggle').addEventListener('change', (e) => {
        localStorage.setItem('darkMode', e.target.checked);
        document.body.classList.toggle('night-mode', e.target.checked);
    });

    document.getElementById('notifications-toggle').addEventListener('change', (e) => {
        localStorage.setItem('notificationsEnabled', e.target.checked);
        if (e.target.checked && Notification.permission !== 'granted') {
            Notification.requestPermission();
        }
    });

    document.getElementById('audio-toggle').addEventListener('change', (e) => {
        localStorage.setItem('autoAudio', e.target.checked);
    });

    // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–±—Ä–æ—Å–∞ —Å—á–µ—Ç—á–∏–∫–æ–≤
    document.getElementById('reset-counters').addEventListener('click', () => {
        if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ —Å—á–µ—Ç—á–∏–∫–∏ –∑–∏–∫—Ä–æ–≤?')) {
            // –£–¥–∞–ª—è–µ–º –≤—Å–µ –∑–∞–ø–∏—Å–∏ —Å—á–µ—Ç—á–∏–∫–æ–≤
            Object.keys(localStorage).forEach(key => {
                if (key.startsWith('count_')) {
                    localStorage.removeItem(key);
                }
            });
            
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —É–¥–∞–ª—è–µ–º –ø–æ ID –∑–∏–∫—Ä–æ–≤
            const allDhikrs = Object.values(dhikrData).flat();
            allDhikrs.forEach(dhikr => {
                localStorage.removeItem(`count_${dhikr.id}`);
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –∑–∏–∫—Ä–æ–≤, –µ—Å–ª–∏ –æ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∞
            if (window.location.pathname.endsWith('dhikr.html')) {
                const activeCategory = document.querySelector('.category-btn.active')?.dataset.category;
                if (activeCategory) {
                    loadDhikr(activeCategory);
                }
            }
            
            alert('–í—Å–µ —Å—á–µ—Ç—á–∏–∫–∏ —É—Å–ø–µ—à–Ω–æ —Å–±—Ä–æ—à–µ–Ω—ã!');
        }
    });
</script>
</body>
</html>

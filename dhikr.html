<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrozPray - –ó–∏–∫—Ä—ã</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Amiri:wght@700&family=Open+Sans:wght@400;600&display=swap">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/dhikr.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>GrozPray</h1>
            <p class="slogan">–í–∞—à –ø–æ–º–æ—â–Ω–∏–∫ –≤ –ø–æ–∫–ª–æ–Ω–µ–Ω–∏–∏</p>
        </header>
        
        <nav>
            <a href="index.html">üïã –ù–∞–º–∞–∑</a>
            <a href="quran.html">üìñ –ö–æ—Ä–∞–Ω</a>
            <a href="dhikr.html" class="active">üìø –ó–∏–∫—Ä—ã</a>
        </nav>

        <main>
            <section class="card">
                <div class="dhikr-categories">
                    <button class="category-btn active" data-category="morning">–£—Ç—Ä–µ–Ω–Ω–∏–µ</button>
                    <button class="category-btn" data-category="evening">–í–µ—á–µ—Ä–Ω–∏–µ</button>
                    <button class="category-btn" data-category="after-prayer">–ü–æ—Å–ª–µ –Ω–∞–º–∞–∑–∞</button>
                    <button class="category-btn" data-category="sleep">–ü–µ—Ä–µ–¥ —Å–Ω–æ–º</button>
                </div>

                <div class="dhikr-list" id="dhikr-list">
                    <!-- –ó–∏–∫—Ä—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å -->
                </div>
            </section>
        </main>

        <footer>
            <p>¬© 2024 GrozPray | –°–¥–µ–ª–∞–Ω–æ –¥–ª—è –º—É—Å—É–ª—å–º–∞–Ω</p>
        </footer>
    </div>

    <script>
        // –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∏–∫—Ä–æ–≤
        const dhikrData = {
            "morning": [
                {
                    "arabic": "ÿ£ŸéÿµŸíÿ®Ÿéÿ≠ŸíŸÜŸéÿß ŸàŸéÿ£ŸéÿµŸíÿ®Ÿéÿ≠Ÿé ÿßŸÑŸíŸÖŸèŸÑŸíŸÉŸè ŸÑŸêŸÑŸéŸëŸáŸê",
                    "translit": "–ê—Å–±–∞—Ö–Ω–∞ –≤–∞ –∞—Å–±–∞—Ö–∞–ª—å-–º—É–ª—å–∫—É –ª–∏–ª–ª—è—Ö",
                    "meaning": "–ú—ã –¥–æ–∂–∏–ª–∏ –¥–æ —É—Ç—Ä–∞, –∏ –≤–ª–∞—Å—Ç—å –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –ê–ª–ª–∞—Ö—É",
                    "count": 1
                },
                {
                    "arabic": "ÿ≥Ÿèÿ®Ÿíÿ≠ŸéÿßŸÜŸé ÿßŸÑŸÑŸéŸëŸáŸê ŸàŸéÿ®Ÿêÿ≠ŸéŸÖŸíÿØŸêŸáŸê",
                    "translit": "–°—É–±—Ö–∞–Ω–∞–ª–ª–∞—Ö–∏ –≤–∞ –±–∏—Ö–∞–º–¥–∏—Ö",
                    "meaning": "–ü—Ä–µ—Å–ª–∞–≤–µ–Ω –ê–ª–ª–∞—Ö –∏ —Ö–≤–∞–ª–∞ –ï–º—É",
                    "count": 33
                },
                {
                    "arabic": "ÿßŸÑŸÑŸéŸëŸáŸè ÿ£ŸéŸÉŸíÿ®Ÿéÿ±Ÿè",
                    "translit": "–ê–ª–ª–∞—Ö—É –∞–∫–±–∞—Ä",
                    "meaning": "–ê–ª–ª–∞—Ö –í–µ–ª–∏–∫",
                    "count": 34
                }
            ],
            "evening": [
                {
                    "arabic": "ÿ£ŸéŸÖŸíÿ≥ŸéŸäŸíŸÜŸéÿß ŸàŸéÿ£ŸéŸÖŸíÿ≥ŸéŸâ ÿßŸÑŸíŸÖŸèŸÑŸíŸÉŸè ŸÑŸêŸÑŸéŸëŸáŸê",
                    "translit": "–ê–º—Å–∞–π–Ω–∞ –≤–∞ –∞–º—Å–∞–ª—å-–º—É–ª—å–∫—É –ª–∏–ª–ª—è—Ö",
                    "meaning": "–ú—ã –¥–æ–∂–∏–ª–∏ –¥–æ –≤–µ—á–µ—Ä–∞, –∏ –≤–ª–∞—Å—Ç—å –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –ê–ª–ª–∞—Ö—É",
                    "count": 1
                },
                {
                    "arabic": "ÿ≥Ÿèÿ®Ÿíÿ≠ŸéÿßŸÜŸé ÿßŸÑŸÑŸéŸëŸáŸê",
                    "translit": "–°—É–±—Ö–∞–Ω–∞–ª–ª–∞—Ö",
                    "meaning": "–ü—Ä–µ—Å–ª–∞–≤–µ–Ω –ê–ª–ª–∞—Ö",
                    "count": 33
                }
            ],
            "after-prayer": [
                {
                    "arabic": "ÿ£Ÿéÿ≥Ÿíÿ™Ÿéÿ∫ŸíŸÅŸêÿ±Ÿè ÿßŸÑŸÑŸéŸëŸáŸé",
                    "translit": "–ê—Å—Ç–∞–≥—Ñ–∏—Ä—É–ª–ª–∞—Ö",
                    "meaning": "–ü—Ä–æ—à—É –ø—Ä–æ—â–µ–Ω–∏—è —É –ê–ª–ª–∞—Ö–∞",
                    "count": 3
                },
                {
                    "arabic": "ŸÑŸéÿß ÿ•ŸêŸÑŸéŸáŸé ÿ•ŸêŸÑŸéŸëÿß ÿßŸÑŸÑŸéŸëŸáŸè",
                    "translit": "–õ—è –∏–ª—è—Ö–∞ –∏–ª–ª—è–ª–ª–∞—Ö",
                    "meaning": "–ù–µ—Ç –±–æ–∂–µ—Å—Ç–≤–∞, –∫—Ä–æ–º–µ –ê–ª–ª–∞—Ö–∞",
                    "count": 33
                }
            ],
            "sleep": [
                {
                    "arabic": "ÿ®Ÿêÿßÿ≥ŸíŸÖŸêŸÉŸé ÿ±Ÿéÿ®ŸêŸëŸä ŸàŸéÿ∂ŸéÿπŸíÿ™Ÿè ÿ¨ŸéŸÜŸíÿ®ŸêŸä",
                    "translit": "–ë–∏—Å–º–∏–∫–∞ —Ä–∞–±–±–∏ –≤–∞–¥–∞'—Ç—É –¥–∂–∞–Ω–±–∏",
                    "meaning": "–ò–º–µ–Ω–µ–º –¢–≤–æ–∏–º, –ì–æ—Å–ø–æ–¥–∏, —è –ª–æ–∂—É—Å—å",
                    "count": 1
                },
                {
                    "arabic": "ÿßŸÑŸíÿ≠ŸéŸÖŸíÿØŸè ŸÑŸêŸÑŸéŸëŸáŸê ÿßŸÑŸéŸëÿ∞ŸêŸä ÿ£Ÿéÿ∑ŸíÿπŸéŸÖŸéŸÜŸéÿß ŸàŸéÿ≥ŸéŸÇŸéÿßŸÜŸéÿß",
                    "translit": "–ê–ª—å—Ö–∞–º–¥—É–ª–∏–ª–ª—è—Ö–∏ –∞–ª–ª—è–∑–∏ –∞—Ç'–∞–º–∞–Ω–∞ –≤–∞ —Å–∞–∫–∞–Ω–∞",
                    "meaning": "–•–≤–∞–ª–∞ –ê–ª–ª–∞—Ö—É, –ö–æ—Ç–æ—Ä—ã–π –Ω–∞–∫–æ—Ä–º–∏–ª –∏ –Ω–∞–ø–æ–∏–ª –Ω–∞—Å",
                    "count": 1
                }
            ]
        };

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∏–∫—Ä–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        function loadDhikr(category) {
            const dhikrList = document.getElementById('dhikr-list');
            dhikrList.innerHTML = '';

            dhikrData[category].forEach(dhikr => {
                const dhikrItem = document.createElement('div');
                dhikrItem.className = 'dhikr-item';
                dhikrItem.innerHTML = `
                    <div class="dhikr-arabic" dir="rtl" lang="ar">${dhikr.arabic}</div>
                    <div class="dhikr-translit">${dhikr.translit}</div>
                    <div class="dhikr-meaning">${dhikr.meaning}</div>
                    <div class="counter">
                        <button class="counter-btn minus">‚àí</button>
                        <span class="count">0</span>
                        <button class="counter-btn plus">+</button>
                        <span class="times">/${dhikr.count}</span>
                    </div>
                `;
                dhikrList.appendChild(dhikrItem);
            });

            initCounters();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤ —Å –≤–∏–±—Ä–∞—Ü–∏–µ–π
        function initCounters() {
            document.querySelectorAll('.counter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    // –í–∏–±—Ä–∞—Ü–∏—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
                    if (navigator.vibrate) navigator.vibrate(50);
                    
                    const counter = this.parentElement.querySelector('.count');
                    const maxCount = parseInt(this.parentElement.querySelector('.times').textContent.slice(1));
                    let count = parseInt(counter.textContent);
                    
                    if (this.classList.contains('plus') && count < maxCount) {
                        count++;
                    } else if (this.classList.contains('minus') && count > 0) {
                        count--;
                    }
                    
                    counter.textContent = count;
                    
                    // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –º–∞–∫—Å–∏–º—É–º–∞
                    if (count >= maxCount) {
                        counter.style.color = '#2c6e49';
                        counter.style.fontWeight = 'bold';
                    } else {
                        counter.style.color = '';
                        counter.style.fontWeight = '';
                    }
                });
            });
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
        document.querySelectorAll('.category-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                loadDhikr(this.dataset.category);
                
                // –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –Ω–∞—á–∞–ª—É —Å–ø–∏—Å–∫–∞
                document.getElementById('dhikr-list').scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        });

        // –ó–∞–≥—Ä—É–∂–∞–µ–º —É—Ç—Ä–µ–Ω–Ω–∏–µ –∑–∏–∫—Ä—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        window.addEventListener('load', () => {
            loadDhikr('morning');
            
            // –ó–∞–ø—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–¥–ª—è –±—É–¥—É—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π)
            if ('Notification' in window && Notification.permission !== 'denied') {
                Notification.requestPermission();
            }
        });

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≤ localStorage
        window.addEventListener('beforeunload', () => {
            const counters = {};
            document.querySelectorAll('.dhikr-item').forEach((item, index) => {
                const count = item.querySelector('.count').textContent;
                counters[index] = count;
            });
            localStorage.setItem('dhikrCounters', JSON.stringify(counters));
        });
    </script>
</body>
</html>
